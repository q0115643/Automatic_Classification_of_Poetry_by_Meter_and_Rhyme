import pypoesy
import os, fnmatch

path ='C:/Users/Zele/Downloads/AIML/Scansion/litlab-poetry-master/litlab-poetry-master/poems'
f = open('out.json','wb')

for ppath, dirs, files in os.walk(os.path.abspath(path)):
    for filename in fnmatch.filter(files, "*.txt"):
        fread = open(os.path.join(path, filename), 'r')
        poem = pypoesy.PoemTXT(fread.read())
##        fread.write("\n")
##        for lineid,line in sorted(poem.lined.items()):
##            print lineid,line
        poem.parse()
        for lineid,lineObj in sorted(poem.prosodic.items()):
##            print lineid,lineObj.parse_str()
            print >>f,lineid,lineObj.parse_str()
##        for lineid,lineObj in sorted(poem.prosodic.items()):
####	        print lineid,lineObj.parse_str(text=False, viols=False)
##            print >>f, lineObj.parse_str(text=False, viols=False)
##        for featname,featval in sorted(poem.statd.items()):
##	        print featname,'\t',featval
        fread.close()
##fread.close()
f.close()

##for lineid,line in sorted(poem.lined.items()):
##	print lineid,line
##poem.parse()
##for lineid,lineObj in sorted(poem.prosodic.items()):
##    print lineid,lineObj.parse_str()
##    print >>f,lineid,lineObj.parse_str()

